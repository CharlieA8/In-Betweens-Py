{% extends 'base.html' %}

{% block head %}
{% endblock %}

{% block body %}
    <div class="title">
        <h1 class="clue1">Welcome</h1>
        <h1 class="clue2">Anna!</h1>
    </div>

    <form action="/update" method="post" id="editor-form">
        <!-- Editable Clues -->
        <textarea name="clue1" class="clueUpdate" placeholder="Enter Clue 1">{{ firstClue }}</textarea>
        <textarea name="clue2" class="clueUpdate" placeholder="Enter Clue 2">{{ secondClue }}</textarea>

        <br>

        <!-- Editable Answers -->
        <p><input type="text" name="answer1" class="clue1" placeholder="Answer 1" value="{{ answer1 }}"></p>
        <p><input type="text" name="in_between" class="in_between" placeholder="In-Between" value="{{ in_between }}"></p>
        <p><input type="text" name="answer2" class="clue2" placeholder="Answer 2" value="{{ answer2 }}"></p>

        <input type="hidden" id="submit_action" name="submit_action" value="update">

        <div class="parent">
            <button type="submit" class="submit" onclick="document.getElementById('submit_action').value='update'">
                Update Tomorrow
            </button>
            <button type="submit" class="submit" onclick="document.getElementById('submit_action').value='archive'">
                Add to Archive
            </button>
        </div>
    </form>

    {% if new_data %}
        <table>
            <tr>
                <th>Clue 1</th>
                <td>{{ new_data.clue1 }}</td>
            </tr>
            <tr>
                <th>Clue 2</th>
                <td>{{ new_data.clue2 }}</td>
            </tr>
            <tr>
                <th>Answer 1</th>
                <td>{{ new_data.answer1 }}</td>
            </tr>
            <tr>
                <th>In-Between</th>
                <td>{{ new_data.in_between }}</td>
            </tr>
            <tr>
                <th>Answer 2</th>
                <td>{{ new_data.answer2 }}</td>
            </tr>
        </table>
    {% else %}
        <p>No current data found in the update table.</p>
    {% endif %}

    <div class="parent">
        <button class="rulesButton" id="forceupdate" name="button" onclick="window.location.href='/forceupdate'">Force Update</button>
        <button class="rulesButton" name="button" onclick="window.location.href='/view-archive'">View Archive</button>
    </div>

    <script>
        // Check if there's a message to display
        const message = "{{ message|safe }}";
        const messageType = "{{ message_type }}";
        
        if (message) {
            if (messageType === "success") {
                alert(message);
            } else if (messageType === "error") {
                alert("Error: " + message);
            }
        }
    </script>
{% endblock %}